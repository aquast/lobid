@(doc: play.api.libs.json.JsLookupResult)

@import play.api.libs.json._
@import scala.collection.immutable.List
@import views.TableRow

@primaryTopic(node: JsLookupResult) = @{
    ((node \ "http://xmlns.com/foaf/0.1/primaryTopic").asOpt[JsValue] match {
      case None => Some(node)
      case Some(id) => (node \ "@graph").as[List[JsValue]].find((v: JsValue) => (v \ "@id") == id \ "@id")
    }).map(_ \ "@type")
}

@rdfa("Typ", "http://www.w3.org/1999/02/22-rdf-syntax-ns#type", doc.get, TableRow.VALUES, (primaryTopic(doc)))
